# Telegram-bot
Бот для рассылки emal в чаты телеграма.
Поставили задачу масштабировать email рассылку(письмо генерируется на сервере при появлении новой записи в логе проблем терминалов) в телегу.
Готовых библиотек для перехвата входящих email рассылок нет, а вот на исходящие письма решений полно.
Ввиду нетривиальности задачи пришлось делать костыли с промежуточной базой данных, в которую складываются проблемы через api.
При появлении новой записи в базе она считывается в автоматическом,фоновом режиме. И затем рассылается подписчикам бота (менеджерам терминалов).

Бота удалось реализовать через вебхуки с подключением SSl - сертификата ==> он максимально экономно будет расходовать ресурсы сервера
и моментально реагировать на запросы из API телеграма.

Базу данных подключил Mysql, в ней 2 таблицы: 

1)список пользователей телеграмма, которым бот асинхронно будет отправлять уведомления о проблемах.
Список регулируется командами "Subscribe/Unsubscribe" в меню бота. (статус подписки 1 или 0)

2)сами проблемы. Эта таблица в фоновом режиме проверяется ботом каждые N минут на наличие новых строк.
Самая сложная часть бота, тут пришлось искать решение через многопоточность,потому что цикличная проверка базы блокировала выполнение остального скрипта. 
Теперь она работает в отдельном потоке, никак не мешая взаимодействию пользователей с ботом.
